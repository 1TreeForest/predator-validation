var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,f,e){a instanceof String&&(a=String(a));for(var g=a.length,b=0;b<g;b++){var c=a[b];if(f.call(e,c,b,a))return{i:b,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,e){a!=Array.prototype&&a!=Object.prototype&&(a[f]=e.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,f,e,g){if(f){e=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var b=a[g];b in e||(e[b]={});e=e[b]}a=a[a.length-1];g=e[a];f=f(g);f!=g&&null!=f&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6","es3");
!function(a,f,e,g){XF.PaymentProviderContainer=XF.Element.newHandler({options:{},init:function(){if(this.$target.is("form"))this.$target.on("ajax-submit:response",XF.proxy(this,"submitResponse"));else console.error("%o is not a form",this.$target[0])},submitResponse:function(b,a){if(a.providerHtml){b.preventDefault();var c=this.$target.parent().find(".js-paymentProviderReply-"+a.purchasableTypeId+a.purchasableId);XF.setupHtmlInsert(a.providerHtml,function(b,a){c.html(b)})}}});XF.BraintreePaymentForm=
XF.Element.newHandler({options:{clientToken:null,formStyles:".js-formStyles"},xhr:null,init:function(){this.$target.on("submit",XF.proxy(this,"submit"));XF.loadScripts(["https://js.braintreegateway.com/web/3.19.0/js/client.min.js","https://js.braintreegateway.com/web/3.19.0/js/hosted-fields.min.js"],XF.proxy(this,"postInit"));var b=this.$target.closest(".overlay-container").data("overlay");b.on("overlay:hidden",function(){b.destroy()})},postInit:function(){if(this.options.clientToken){var b=this,
c=this.$target.find(this.options.formStyles)||{},d=c?a.parseJSON(c.first().html()):{};braintree.client.create({authorization:this.options.clientToken},function(c,e){c?XF.alert(c.message):braintree.hostedFields.create({client:e,styles:d,fields:{number:{selector:"#card-number",placeholder:"1234 1234 1234 1234"},expirationDate:{selector:"#card-expiry",placeholder:"MM / YY"},cvv:{selector:"#card-cvv",placeholder:"CVC"}}},function(c,d){if(c)XF.alert(c.message);else{c=d._fields;for(var h in c)c.hasOwnProperty(h)&&
a(c[h].containerElement).removeClass("is-disabled");d.on("cardTypeChange",function(b){b=1===b.cards.length?b.cards[0].type:"unknown";var c={visa:"fa-cc-visa","master-card":"fa-cc-mastercard","american-express":"fa-cc-amex",discover:"fa-cc-discover","diners-club":"fa-cc-diners",jcb:"fa-cc-jcb",unionpay:"fa-credit-card-alt",maestro:"fa-credit-card-alt",unknown:"fa-credit-card-alt"};if(b){var d=a("#brand-icon"),h="fa-credit-card-alt";b in c&&(h=c[b]);d[0].className="";d.addClass("fa");d.addClass("fa-lg");
d.addClass(h)}});b.$target.on("submit",function(a){a.preventDefault();d.tokenize(function(a,c){a?(c=a.message,(a=a.details.invalidFieldKeys)&&(c+=" ("+a.join(", ")+")"),XF.alert(c)):b.response(c)})})}})})}else console.error("Form must contain a data-client-token attribute.")},submit:function(b){b.preventDefault();return!1},response:function(b){this.xhr&&this.xhr.abort();this.xhr=XF.ajax("post",this.$target.attr("action"),b,XF.proxy(this,"complete"),{skipDefaultSuccess:!0})},complete:function(b){this.xhr=
null;b.redirect&&XF.redirect(b.redirect)}});XF.BraintreeApplePayForm=XF.Element.newHandler({options:{clientToken:null,currencyCode:"",boardTitle:"",title:"",amount:""},xhr:null,init:function(){XF.loadScripts(["https://js.braintreegateway.com/web/3.19.0/js/client.min.js","https://js.braintreegateway.com/web/3.19.0/js/apple-pay.min.js"],XF.proxy(this,"postInit"))},postInit:function(){if(this.options.clientToken){var b=this,a=!1;f.ApplePaySession&&ApplePaySession.canMakePayments()&&(a=!0);a&&braintree.client.create({authorization:this.options.clientToken},
function(a,c){a?XF.alert(a.message):braintree.applePay.create({client:c},function(a,c){a?XF.alert(a.message):ApplePaySession.canMakePaymentsWithActiveCard(c.merchantIdentifier).then(function(a){a?(b.$target.removeClass("u-hidden"),b.$target.find(".js-applePayButton").on("click",function(){var a=c.createPaymentRequest({total:{label:b.options.title,amount:b.options.amount}}),d=new ApplePaySession(2,a);d.onvalidatemerchant=function(a){c.performValidation({validationURL:a.validationURL,displayName:b.options.boardTitle},
function(b,a){b?(XF.alert(b.message),d.abort()):d.completeMerchantValidation(a)})};d.onpaymentauthorized=function(a){c.tokenize({token:a.payment.token},function(a,c){a?(XF.alert(a.message),d.completePayment(ApplePaySession.STATUS_FAILURE)):(d.completePayment(ApplePaySession.STATUS_SUCCESS),b.response(c))})};d.begin()})):console.warn("No Apple Pay card available")})})})}else console.error("Form must contain a data-client-token attribute.")},response:function(b){this.xhr&&this.xhr.abort();this.xhr=
XF.ajax("post",this.$target.attr("action"),b,XF.proxy(this,"complete"),{skipDefaultSuccess:!0})},complete:function(b){this.xhr=null;b.redirect&&XF.redirect(b.redirect)}});XF.BraintreePayPalForm=XF.Element.newHandler({options:{clientToken:null,paypalButton:"#paypal-button",testPayments:!1},xhr:null,init:function(){XF.loadScripts(["https://www.paypalobjects.com/api/checkout.js","https://js.braintreegateway.com/web/3.19.0/js/client.min.js","https://js.braintreegateway.com/web/3.19.0/js/paypal-checkout.min.js",
"https://js.braintreegateway.com/web/3.19.0/js/data-collector.min.js"],XF.proxy(this,"postInit"))},postInit:function(){if(this.options.clientToken){var b=this;braintree.client.create({authorization:this.options.clientToken},function(a,d){a?XF.alert(a.message):braintree.paypalCheckout.create({client:d},function(a,c){a?XF.alert(a.message):paypal.Button.render({env:b.options.testPayments?"sandbox":"production",payment:function(){return c.createPayment({flow:"vault",enableShippingAddress:!1})},onAuthorize:function(a,
d){return c.tokenizePayment(a).then(function(a){b.response(a)})},onCancel:function(a){console.log("checkout.js payment cancelled",JSON.stringify(a,0,2))},onError:function(a){XF.alert(a.message)}},b.options.paypalButton)})})}else console.error("Form must contain a data-client-token attribute.")},response:function(a){this.xhr&&this.xhr.abort();this.xhr=XF.ajax("post",this.$target.attr("action"),a,XF.proxy(this,"complete"),{skipDefaultSuccess:!0})},complete:function(a){this.xhr=null;a.redirect&&XF.redirect(a.redirect)}});
XF.StripePaymentForm=XF.Element.newHandler({options:{publishableKey:null,formStyles:".js-formStyles",recurring:null,piSecret:null,prEnabled:null,prCountry:null,prCost:null,prCurrency:null,prLabel:null,styleType:"dark"},stripe:null,elements:null,elementsCache:{},paymentRequest:null,stripeJs:"https://js.stripe.com/v3/",processing:null,init:function(){this.$target.on("submit",XF.proxy(this,"submit"));XF.loadedScripts.hasOwnProperty(this.stripeJs)?this.postInit():XF.loadScript(this.stripeJs,XF.proxy(this,
"postInit"))},postInit:function(){if(this.options.publishableKey){this.stripe=Stripe(this.options.publishableKey);this.elements=this.stripe.elements();this.options.prEnabled&&(this.paymentRequest=this.stripe.paymentRequest({country:this.options.prCountry,currency:this.options.prCurrency.toLowerCase(),total:{label:this.options.prLabel,amount:this.options.prCost},requestPayerName:!0,requestPayerEmail:!0}));this.initElements();var b=this.$target.closest(".overlay-container").data("overlay");b.on("overlay:hidden",
function(){b.destroy();a("iframe").each(function(){var b=a(this);b.attr("name")&&0<=b.attr("name").toLowerCase().indexOf("stripe")&&b.remove()})})}else console.error("Form must contain a data-publishable-key attribute.")},initElements:function(){var b=this,c=this.stripe,d=this.elements,e=this.options.piSecret,f=this.paymentRequest,h=this.$target.find(this.options.formStyles)||{};h=h?a.parseJSON(h.first().html()):{};if(f){var g=d.create("paymentRequestButton",{paymentRequest:f,style:{paymentRequestButton:{theme:"light"===
this.options.styleType?"light-outline":"dark"}}});f.canMakePayment().then(function(a){a?(g.mount("#payment-request-button"),b.$target.find(".js-pr-remove").show()):b.$target.find(".js-pr-remove").remove()});f.on("paymentmethod",function(a){c.confirmPaymentIntent(e,{payment_method:a.paymentMethod.id,save_payment_method:b.options.recurring?!0:!1,setup_future_usage:b.options.recurring?"off_session":null}).then(function(c){c.error?a.complete("fail"):(a.complete("success"),b.handleCardPayment())})})}d=
d.create("card",{style:h});d.mount("#card-element");this.elementsCache.card=d},submit:function(b){b.preventDefault();if(this.processing)return!1;this.processing=!0;b=a(b.target);var c=this.elementsCache.card,d=a("#card-errors-container"),e=d.find("#card-errors");this.handleCardPayment(c);d.addClass("u-hidden");e.addClass("u-hidden");e.text("");b.addClass("is-disabled").prop("disabed",!0)},handleCardPayment:function(a){var b=this,d=this.stripe,e=function(a){a.error?b.handleError(a.error):b.response()};
if(a){var f={save_payment_method:this.options.recurring?!0:!1,setup_future_usage:this.options.recurring?"off_session":null};d.handleCardPayment(this.options.piSecret,a,f).then(e)}else d.handleCardPayment(this.options.piSecret).then(e)},handleError:function(b){var c=a("#card-errors-container"),d=c.find("#card-errors");d.text(b.message);d.removeClass("u-hidden");c.removeClass("u-hidden");this.processing=!1},response:function(){var a=this.$target,c=XF.getDefaultFormData(a);XF.ajax("post",a.attr("action"),
c,XF.proxy(this,"complete"),{skipDefaultSuccess:!0})},complete:function(a){this.processing=!1;a.redirect&&XF.redirect(a.redirect)}});XF.Element.register("payment-provider-container","XF.PaymentProviderContainer");XF.Element.register("braintree-payment-form","XF.BraintreePaymentForm");XF.Element.register("braintree-apple-pay-form","XF.BraintreeApplePayForm");XF.Element.register("braintree-paypal-form","XF.BraintreePayPalForm");XF.Element.register("stripe-payment-form","XF.StripePaymentForm")}(jQuery,
window,document);
